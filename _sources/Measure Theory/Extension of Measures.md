# Extension of Measures

The next theorem shows that we can extend a set function
on a semi-algebra *uniquely* to
a set function on the algebra generated by it.


````{prf:theorem}
:label: thm:3

Let $\mathcal{S}$ be a semi-algebra on $\Omega$,
and $\mu$ an additive set function.
Then there exists an additive function $\nu$
on the algebra generated by $\mathcal{S}$, $\mathcal{A}(\mathcal{S})$,
such that
- ➀ $\nu$ is additive,
- ➁ $\nu$ is an extension of $\mu$,
i.e., $\nu(E) = \mu(E) \; \forall E \in \mathcal{S}$, and
- ➂ $\nu$ is a unique extension, that is,
if there are two additive
set functions, $\nu_1$ and $\nu_2$,
on $\mathcal{A}(\mathcal{S})$
such that $\nu_1(E) = \nu_2(E) \; \forall E \in \mathcal{S}$,
then $\nu_1(A) = \nu_2(A) \; \forall A \in \mathcal{A}(\mathcal{S})$.


````

In the proofs of existence and uniqueness,
showing the existence is often way difficult than that of uniqueness.
As in the proof of this theorem,
the first thing we need to do is to
construct such an extension $\nu$.
Fortunately, the construction is easy and natural to think of
thanks to the well-explained
structure of the algebra generated by semi-algebra ({prf:ref}`thm:2`).

For every set $A \in \mathcal{A}(\mathcal{S})$,
we know that it can written
as a finite disjoint union of sets in $\mathcal{S}$.
Namely, $\exists E_1, \ldots, E_n \in \mathcal{S}$ such that

```{math}
:label: eq:7
\begin{align}
A = \biguplus_{i=1}^n E_i
\end{align}
```

Therefore, it is natural to define

```{math}
:label: eq:8
\begin{align}\nu(A) = \sum_{i=1}^n \mu(E_i)
\end{align}
```

But note that the representation of $A$ in {eq}`eq:7`
is not unique.
Hence, in the proof we are about to present,
we need to first show $\nu$
is well-defined by {eq}`eq:8`,
regardless of different representations of $A$.


````{prf:proof}
(Well-Definedness of $\nu$) Let $A \in \mathcal{A}$.
Suppose

```{math}
\begin{align*}
A = \biguplus_{i=1}^n E_i = \biguplus_{j=1}^m F_j
\end{align*}
```

where $E_i, F_j \in \mathcal{S}$.
We need to show $\sum_{i=1}^n \mu(E_i) = \sum_{j=1}^m \mu(F_j)$.
Since $E_i \subseteq A$, we have

```{math}
\begin{align*}
E_i = E_i \cap A = \biguplus_{j=1}^m E_i \cap F_j
\end{align*}
```

It then follows that

```{math}
:label: eq:9
\begin{align}\mu(E_i) = \sum_{j=1}^m \mu(E_i \cap F_j)
\end{align}
```

since $\mu$ is additive.
Similarly, we can also show

```{math}
:label: eq:10
\begin{align}\mu(F_j) = \sum_{i=1}^n \mu(E_i \cap F_j)
\end{align}
```

Summing up {eq}`eq:9` over $i$
and summing up {eq}`eq:10` over $j$,
we find

```{math}
\begin{align*}\sum_{i=1}^n \mu(E_i)
= \sum_{i=1}^n \sum_{j=1}^m \mu(E_i \cap F_j)
= \sum_{j=1}^m \mu(F_j)
\end{align*}
```

Therefore, $\nu$ is well-defined by {eq}`eq:8`.

(Additivity) Next, we show $\nu$ is additive.
It suffices to show

```{math}
:label: eq:11
\begin{align}\mu(A \uplus B) = \mu(A) + \mu(B)
\quad\forall A, B \in\mathcal{A}(\mathcal{S})
\end{align}
```

Suppose

```{math}
\begin{align*}
A = \biguplus_{i=1}^n E_i
\quad\text{and}\quad
B = \biguplus_{j=1}^m F_j
\end{align*}
```

where $E_i, F_j \in \mathcal{S}$.
By the definition of $\nu$, we have

```{math}
\begin{align*}\nu(A) = \sum_{i=1}^n \mu(E_i)
\quad\text{and}\quad\nu(B) = \sum_{j=1}^m \mu(F_j)
\end{align*}
```

On the other hand, since $A$ and $B$
are disjoint, it is clear
that $A \uplus B$
is a disjoint union of all $E_i$'s and $F_j$'s,
which implies

```{math}
\begin{align*}\nu(A) = \sum_{i=1}^n \mu(E_i) + \sum_{j=1}^m \mu(F_j)
= \nu(A) + \nu(B)
\end{align*}
```

This is exactly {eq}`eq:11`.

($\nu$ Being An Extension of $\mu$)
This part is rather obvious since set $E$
in $\mathcal{S}$ can be regarded as a union of itself.
Then, by {eq}`eq:8`,
we have

```{math}
\begin{align*}\nu(E) = \mu(E)
\end{align*}
```
(Uniqueness) Finally, we need to show the extension of $\mu$
is unique.
Suppose that there are two additive set function, $\nu_1$ and $\nu_2$,
on $\mathcal{A}(\mathcal{S})$ such that

```{math}
\begin{align*}\nu_1(E) = \nu_2(E)
\quad\forall E \in\mathcal{S}\end{align*}
```

Let $A \in \mathcal{A}(\mathcal{S})$.
Then there exists $E_1, \ldots, E_n \in \mathcal{S}$
such that $A = \biguplus_{i=1}^n E_i$({prf:ref}`thm:2`).
Because $\nu_1$ and $\nu_2$ are additive,
we have

```{math}
\begin{align*}\nu_1(A) = \sum_{i=1}^n \nu_1(E_i)
\quad\text{and}\quad\nu_2(A) = \sum_{i=1}^n \nu_2(E_i)
\end{align*}
```

Therefore, we see that indeed $\nu_1(A) = \nu_2(A)$.

````

````{prf:example}
:label: eg:4

Recall {prf:ref}`eg:2`
where $\Omega = (0, 1]$,

```{math}
\begin{align*}\mathcal{S} = \set{(a, b]}{0 \leq a < b \leq 1}\uplus\{\emptyset\}\end{align*}
```

is a semi-algebra, and $\mu$ is a set function
on $\mathcal{S}$ given by

```{math}
\begin{align*}\mu(\emptyset) = 0
\quad\text{and}\quad\mu(a, b] = \begin{cases}
\infty,
&a=0 \\
b - a,
&a > 0
\end{cases}\end{align*}
```

We have shown in {prf:ref}`eg:2` that $\mu$ is additive
but not $\sigma$-additive.

Now, consider the algebra generated
by $\mathcal{S}$, $\mathcal{A}(\mathcal{S})$.
By {prf:ref}`thm:3`, we have a unique extension $\nu$
of $\mu$ on $\mathcal{A}(\mathcal{S})$
such that $\nu$ is also additive.

````

````{prf:theorem} Carathéodory's Extension Theorem
:label: thm:1

TODO

````
